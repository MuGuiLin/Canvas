<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>HTML5 Canvas 绘制动画</title>
	<style type="text/css">
		* {
			font-family: "微软雅黑";
		}

		[id*=canvas] {
			border: 1px solid red;
			display: block;
			margin: auto;
		}

		[id*=div] {
			width: 250px;
			height: 100px;
			font-size: 100px;
			font-weight: bold;
			color: blue;
			position: absolute;
			top: 500px;
			left: 850px;
		}
	</style>
</head>

<body>
	<h1 style="text-align: center;">HTML5 Canvas 绘制动画</h1>
	<hr /><br />

	<canvas id="canvas" width="800" height="600"></canvas>

	<div id="div"></div>
</body>

<script type="text/javascript">

	var context = document.getElementById("canvas").getContext("2d");

	/**
	 * 注意：在canvas中绘制图形时，要【样式在前，绘制在后】，不然：样式会不生效！！
	 * 
	 * 注意：已绘制到Canvas画布上的图形或图像不可被修改，只能被【覆盖 或 擦除】！！
	 **/
	
	 var i = 0, y = 0;
	var SET1 = setInterval(code1, 100);

	context.strokeStyle = "cyan"
	context.strokeRect(0, 300, 800, 20);
	var SET2 = setInterval(code2, 10);

	function code1() {
		context.fillStyle = "red";
		i += 20;
		if (i < 800) {
			context.fillRect(i, 100, 10, 10);
		}
		else {
			clearInterval(SET1);
			context.fillRect(790, 100 + i, 10, 10);
			context.fillRect(790 - i, 200, 10, 10);
			context.fillRect(0, 200 - i, 10, 10);

		}
	};

	function code2() {
		context.fillStyle = "#0000FF";
		context.fillRect(y, 300, 20, 20);
		if (y < 800) {
			y++;
			document.getElementById("div").innerHTML = y + "%";
		}
		else {
			clearInterval(SET2);
			alert("加载完毕！");
		}
	};
</script>

</html>